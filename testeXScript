-- Carregar biblioteca
local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()

-- Aviso ao executar
Fluent:Notify({ Title = "executado!", Content = "executando com sucesso" })
Fluent:Notify({ Title = "Servidor XScripts oficial discord!", Content = "https://discord.gg/qsYR297DR2" })

local Window = Fluent:CreateWindow({
    Title = "XScript universal üî• | Vers√£o 1.0.0 ",
    TabWidth = 160, 
    Size = UDim2.fromOffset(580, 460), 
    Theme = "Amethyst"
})

local Tabs = {
    Tabinfo = Window:AddTab({ Title = "Tab Info" }),
    kill = Window:AddTab({ Title = "Kill All", Icon = "home" }),
    guis = Window:AddTab({ Title = "Guis", Icon = "file" }),
    localplayer = Window:AddTab({ Title = "Local Player", Icon = "user" }),
    troll = Window:AddTab({ Title = "Troll", Icon = "star" }),
    confi = Window:AddTab({ Title = "Configura√ß√µes", Icon = "settings" })
}

-- Fun√ß√£o para alternar o modo helic√≥ptero
local isHelicopterMode = false
local helicopterConnection

local function toggleHelicopterMode()
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()

    if isHelicopterMode then
        -- Desativar o helic√≥ptero
        isHelicopterMode = false
        if helicopterConnection then
            helicopterConnection:Disconnect()  -- Desconectar o loop de rota√ß√£o
        end
        print("Helicopter mode desativado")
    else
        -- Ativar o helic√≥ptero
        isHelicopterMode = true
        print("Helicopter mode ativado")

        -- Fun√ß√£o para rotacionar o personagem continuamente
        helicopterConnection = game:GetService("RunService").Stepped:Connect(function()
            if character and character:FindFirstChild("HumanoidRootPart") then
                -- Rotaciona o personagem em torno do eixo Y
                character:SetPrimaryPartCFrame(character.PrimaryPart.CFrame * CFrame.Angles(0, math.rad(10), 0))
            end
        end)
    end
end

-- Adicionando o bot√£o de helic√≥ptero alternador na aba Troll
Tabs.troll:AddToggle("helicopterToggle", 
{
    Title = "Helic√≥ptero Toggle", 
    Description = "Ativar/Desativar helic√≥ptero", 
    Default = false, 
    Callback = function(state)
        toggleHelicopterMode()
    end
})

-- Fun√ß√£o de Kill All com espada
local autoKill = false

local function followAndAttack()
    while autoKill do
        local player = game.Players.LocalPlayer
        local character = player.Character
        local sword = character:FindFirstChildOfClass("Tool")

        -- Equipar a espada automaticamente se n√£o estiver equipada
        if not sword or not sword.Name:lower():find("sword") then
            for _, tool in pairs(player.Backpack:GetChildren()) do
                if tool:IsA("Tool") and tool.Name:lower():find("sword") then
                    character.Humanoid:EquipTool(tool)
                    sword = tool
                    break
                end
            end
        end

        if sword and sword.Name:lower():find("sword") then
            for _, target in pairs(game.Players:GetPlayers()) do
                if target ~= player then
                    local targetCharacter = target.Character
                    if targetCharacter and targetCharacter:FindFirstChild("Humanoid") and not targetCharacter:FindFirstChild("ForceField") then
                        -- Fun√ß√£o para seguir o alvo e atacar
                        local function followTarget()
                            while autoKill and targetCharacter.Humanoid.Health > 0 do
                                -- Teleportar para tr√°s do jogador alvo e olhar para ele
                                local targetPosition = targetCharacter.PrimaryPart.Position
                                local behindPosition = targetPosition - (targetCharacter.PrimaryPart.CFrame.LookVector * 3)
                                character:SetPrimaryPartCFrame(CFrame.new(behindPosition, targetPosition))

                                -- Auto click para atacar sem delay
                                sword:Activate()
                                wait(0.01) -- Delay m√≠nimo
                            end
                        end

                        -- Iniciar a fun√ß√£o de seguir e atacar
                        followTarget()

                        -- Matar o jogador alvo
                        targetCharacter.Humanoid.Health = 0
                        wait(0.01) -- Esperar um pouco antes de ir para o pr√≥ximo jogador
                    end
                end
            end
        else
            print("Voc√™ precisa estar com uma espada equipada")
        end
        wait(0.01) -- Pequeno delay antes de repetir o ciclo
    end
end

-- Alternador para ativar/desativar o ataque autom√°tico
Tabs.kill:AddToggle("autoKill", 
{
    Title = "Auto Kill all (Sword)", 
    Description = "mate todos do Servidor (necessita de espada)",
    Default = false, 
    Callback = function(state)
        autoKill = state
        if autoKill then
            print("Auto Kill ativado")
            followAndAttack()
        else
            print("Auto Kill desativado")
        end
    end 
})

-- Bot√£o para executar o Kill All manualmente
Tabs.kill:AddButton({ Title = "Kill All (Sword)", Callback = function() 
    local player = game.Players.LocalPlayer
    local character = player.Character
    local sword = character:FindFirstChildOfClass("Tool")

    -- Equipar a espada automaticamente se n√£o estiver equipada
    if not sword or not sword.Name:lower():find("sword") then
        for _, tool in pairs(player.Backpack:GetChildren()) do
            if tool:IsA("Tool") and tool.Name:lower():find("sword") then
                character.Humanoid:EquipTool(tool)
                sword = tool
                break
            end
        end
    end

    if sword and sword.Name:lower():find("sword") then
        for _, target in pairs(game.Players:GetPlayers()) do
            if target ~= player then
                local targetCharacter = target.Character
                if targetCharacter and targetCharacter:FindFirstChild("Humanoid") and not targetCharacter:FindFirstChild("ForceField") then
                    -- Fun√ß√£o para seguir o alvo e atacar
                    local function followTarget()
                        while targetCharacter.Humanoid.Health > 0 do
                            -- Teleportar para tr√°s do jogador alvo e olhar para ele
                            local targetPosition = targetCharacter.PrimaryPart.Position
                            local behindPosition = targetPosition - (targetCharacter.PrimaryPart.CFrame.LookVector * 3)
                            character:SetPrimaryPartCFrame(CFrame.new(behindPosition, targetPosition))

                            -- Auto click para atacar sem delay
                            sword:Activate()
                            wait(0.01) -- Delay m√≠nimo
                        end
                    end

                    -- Iniciar a fun√ß√£o de seguir e atacar
                    followTarget()

                    -- Matar o jogador alvo
                    targetCharacter.Humanoid.Health = 0
                    wait(0.01) -- Esperar um pouco antes de ir para o pr√≥ximo jogador
                end
            end
        end
        print("Todos os jogadores foram mortos")
    else
        print("Voc√™ precisa estar com uma espada equipada")
    end
end })

-- Fun√ß√£o para ativar/desativar o God Mode
local godMode = false

local function toggleGodMode(state)
    local player = game.Players.LocalPlayer
    local character = player.Character
    local humanoid = character:FindFirstChild("Humanoid")

    if state then
        humanoid.MaxHealth = math.huge
        humanoid.Health = math.huge
        humanoid:GetPropertyChangedSignal("Health"):Connect(function()
            if humanoid.Health < math.huge then
                humanoid.Health = math.huge
            end
        end)
        print("God Mode ativado")
    else
        humanoid.MaxHealth = 100
        humanoid.Health = 100
        print("God Mode desativado")
    end
end

-- Alternador para ativar/desativar o God Mode
Tabs.localplayer:AddToggle("godMode", 
{
    Title = "God Mode", 
    Description = "Ativa ou desativa o God Mode (talvez n√£o funcione est√° em beta!)",
    Default = false, 
    Callback = function(state)
        godMode = state
        toggleGodMode(godMode)
    end 
})

-- Fun√ß√£o para ativar/desativar o noclip
local player = game.Players.LocalPlayer
local noclip = false

local function toggleNoclip(state)
    noclip = state
    if noclip then
        print("Noclip ativado")
        -- Loop cont√≠nuo para desativar colis√µes
        game:GetService("RunService").Stepped:Connect(function()
            if noclip and player.Character then
                for _, part in pairs(player.Character:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.CanCollide = false
                    end
                end
            end
        end)
        print("Noclip ativado")
    else
        -- Ativar colis√µes
        for _, part in pairs(player.Character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = true
            end
        end
        print("Noclip desativado")
    end
end

-- Alternador para ativar/desativar o Noclip
Tabs.localplayer:AddToggle("noclip", 
{
    Title = "Noclip", 
    Description = "Ativar ou desativar o noclip",
    Default = false, 
    Callback = function(state)
        toggleNoclip(state)
    end
})

-- Fun√ß√£o para ajustar a velocidade de caminhada do jogador
Tabs.localplayer:AddSlider("WalkSpeed", 
{
    Title = "Velocidade de Caminhada",
    Description = "Ajuste a velocidade de caminhada do jogador",
    Min = 16, 
    Max = 300, 
    Default = 16, 
    Callback = function(value)
        local player = game.Players.LocalPlayer
        local character = player.Character or player.CharacterAdded:Wait()
        character.Humanoid.WalkSpeed = value
        print("Velocidade de caminhada ajustada para: " .. value)
    end
})

-- Fun√ß√£o para ajustar a altura do pulo do jogador
Tabs.localplayer:AddSlider("JumpPower", 
{
    Title = "Altura do Pulo",
    Description = "Ajuste a altura do pulo do jogador",
    Min = 50, 
    Max = 300, 
    Default = 50, 
    Callback = function(value)
        local player = game.Players.LocalPlayer
        local character = player.Character or player.CharacterAdded:Wait()
        character.Humanoid.JumpPower = value
        print("Altura do pulo ajustada para: " .. value)
    end
})

-- Adicionando bot√µes de interface e configura√ß√µes
Tabs.guis:AddButton({ Title = "Fechar o Gui", Callback = function()
    Window:Close()
    print("Gui fechado")
end })

Tabs.confi:AddButton({ Title = "Reabrir Gui", Callback = function()
    Window:Open()
    print("Gui reaberto")
end })

Tabs.confi:AddButton({ Title = "Destruir Gui", Callback = function()
    Window:Destroy()
    print("Gui destru√≠do")
end })