-- Carregar biblioteca
local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()

-- Aviso ao executar
Fluent:Notify({ Title = "executado!", Content = "executando com sucesso" })
Fluent:Notify({ Title = "Servidor XScripts oficial discord!", Content = "https://discord.gg/qsYR297DR2" })

local Window = Fluent:CreateWindow({
    Title = "XScript universal" .. Fluent.Version,
    TabWidth = 160, 
    Size = UDim2.fromOffset(580, 460), 
    Theme = "Amethyst"
})

local Tabs = {
    Main = Window:AddTab({ Title = "inicio" }),
    Settings = Window:AddTab({ Title = "Settings", Icon = "settings" })
}

-- Parágrafos 
Tabs.Main:AddParagraph({ Title = "XScript versão beta", Content = " https://discord.gg/qsYR297DR2" })

-- Variável para controlar o estado do ataque automático
local autoKill = false

-- Função para seguir e atacar jogadores
local function followAndAttack()
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    
    while autoKill do
        if character and character:FindFirstChild("Humanoid") then
            local sword = character:FindFirstChildOfClass("Tool")

            -- Equipar a espada automaticamente se não estiver equipada
            if not sword or not sword.Name:lower():find("sword") then
                for _, tool in pairs(player.Backpack:GetChildren()) do
                    if tool:IsA("Tool") and tool.Name:lower():find("sword") then
                        character.Humanoid:EquipTool(tool)
                        sword = tool
                        break
                    end
                end
            end

            if sword and sword.Name:lower():find("sword") then
                for _, target in pairs(game.Players:GetPlayers()) do
                    if target ~= player then
                        local targetCharacter = target.Character
                        if targetCharacter and targetCharacter:FindFirstChild("Humanoid") and not targetCharacter:FindFirstChild("ForceField") then
                            -- Função para seguir o alvo e atacar
                            local function followTarget()
                                while autoKill and targetCharacter.Humanoid.Health > 0 do
                                    -- Teleportar para trás do jogador alvo e olhar para ele
                                    local targetPosition = targetCharacter.PrimaryPart.Position
                                    local behindPosition = targetPosition - (targetCharacter.PrimaryPart.CFrame.LookVector * 3)
                                    character:SetPrimaryPartCFrame(CFrame.new(behindPosition, targetPosition))

                                    -- Auto click para atacar sem delay
                                    sword:Activate()
                                    wait(0.01) -- Delay mínimo
                                end
                            end

                            -- Iniciar a função de seguir e atacar
                            followTarget()

                            -- Matar o jogador alvo
                            targetCharacter.Humanoid.Health = 0
                            wait(0.01) -- Esperar um pouco antes de ir para o próximo jogador
                        end
                    end
                end
            else
                print("Você precisa estar com uma espada equipada")
            end
        end
        wait(0.01) -- Pequeno delay antes de repetir o ciclo
    end
end

-- Alternador para ativar/desativar o ataque automático
local Toggle = Tabs.Main:AddToggle("autoKill", 
{
    Title = "Auto Kill all (Sword)", 
    Description = "mate todos do Servidor (necessita de espada)",
    Default = false, 
    Callback = function(state)
        autoKill = state
        if autoKill then
            print("Auto Kill ativado")
            followAndAttack()
        else
            print("Auto Kill desativado")
        end
    end 
})

-- Botão para executar o Kill All manualmente
Tabs.Main:AddButton({ Title = "Kill All (Sword)", Callback = function() 
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local sword = character:FindFirstChildOfClass("Tool")

    -- Equipar a espada automaticamente se não estiver equipada
    if not sword or not sword.Name:lower():find("sword") then
        for _, tool in pairs(player.Backpack:GetChildren()) do
            if tool:IsA("Tool") and tool.Name:lower():find("sword") then
                character.Humanoid:EquipTool(tool)
                sword = tool
                break
            end
        end
    end

    if sword and sword.Name:lower():find("sword") then
        for _, target in pairs(game.Players:GetPlayers()) do
            if target ~= player then
                local targetCharacter = target.Character
                if targetCharacter and targetCharacter:FindFirstChild("Humanoid") and not targetCharacter:FindFirstChild("ForceField") then
                    -- Função para seguir o alvo e atacar
                    local function followTarget()
                        while targetCharacter.Humanoid.Health > 0 do
                            -- Teleportar para trás do jogador alvo e olhar para ele
                            local targetPosition = targetCharacter.PrimaryPart.Position
                            local behindPosition = targetPosition - (targetCharacter.PrimaryPart.CFrame.LookVector * 3)
                            character:SetPrimaryPartCFrame(CFrame.new(behindPosition, targetPosition))

                            -- Auto click para atacar sem delay
                            sword:Activate()
                            wait(0.01) -- Delay mínimo
                        end
                    end

                    -- Iniciar a função de seguir e atacar
                    followTarget()

                    -- Matar o jogador alvo
                    targetCharacter.Humanoid.Health = 0
                    wait(0.01) -- Esperar um pouco antes de ir para o próximo jogador
                end
            end
        end
        print("Todos os jogadores foram mortos")
    else
        print("Você precisa estar com uma espada equipada")
    end
end })

-- Função para monitorar renascimento e reiniciar o auto kill
game.Players.LocalPlayer.CharacterAdded:Connect(function(character)
    if autoKill then
        followAndAttack() -- Reinicia a função se o auto kill estiver ativado
    end
end)

-- O restante do seu código permanece inalterado
-- Função para ativar/desativar o God Mode
-- (e todas as outras funções que você já tinha)